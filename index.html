# Create an updated Animal Run HTML with grass hidden and built-in sound effects (WebAudio).
html = r"""<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Animal Run</title>

  <!-- Single-file: HTML + CSS + JS. Drop into your GitHub Pages repo as index.html -->
  <style>
    :root{
      --sky1:#b3e5ff; --sky2:#6ec1ff; --grass:#78d13f; --ink:#0f172a; --panel:#ffffff;
      --barL:#22c55e; --barR:#ef4444; --ui:#111827; --rail:#cbd5e1;
      --accent:#f59e0b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif; color:var(--ink);
      background:linear-gradient(var(--sky1),var(--sky2));}
    .wrap{max-width:1100px; margin:auto; padding:16px; display:flex; flex-direction:column; gap:14px}

    header{display:flex; align-items:center; justify-content:space-between; gap:10px}
    h1{margin:0; font-size:28px}
    .btn{cursor:pointer; border:2px solid #0002; background:#ffd166; border-radius:12px; padding:10px 14px; font-weight:700}
    .panel{background:var(--panel); border:3px solid #0002; border-radius:18px}

    /* Controls */
    .controls{display:flex; flex-wrap:wrap; gap:8px; padding:10px; align-items:center}
    .controls input{border:2px solid #0002; border-radius:12px; padding:10px; font-size:14px}
    .controls .toggle{display:flex; align-items:center; gap:6px; font-size:14px; padding:6px 10px; border-radius:999px; background:#f8fafc; border:2px solid #0002}

    /* Gallery */
    .gallery{display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:12px; padding:12px}
    .card{border:3px solid #0002; border-radius:16px; padding:8px; cursor:pointer; background:#fff; transition:transform .08s}
    .card:hover{transform:translateY(-2px)}
    .thumb{width:100%; aspect-ratio:1/1; border-radius:12px; background:#eef; display:grid; place-items:center; overflow:hidden}
    .thumb img{width:100%; height:100%; object-fit:cover}
    .label{margin-top:6px; text-align:center; font-weight:700}

    /* Arena */
    .arena{display:none}
    .arena.show{display:block}
    .stage{position:relative; border:3px solid #0002; border-radius:18px; overflow:hidden; min-height:480px;
      /* Removed opaque grass: keep bright sky only for full animal visibility */
      background:
        radial-gradient(800px 300px at 50% 15%, #ffffff88, #0000 70%),
        linear-gradient(#dff2ff 0%, #bfe6ff 100%);
    }
    /* Hide the ground so it doesn't cover the animals */
    .ground{display:none}
    .fighter{position:absolute; bottom:120px; width:240px; height:240px; display:grid; place-items:center; filter:drop-shadow(0 12px 0 #0001)}
    .fighter img{width:100%; height:100%; object-fit:contain; border-radius:16px; background:#fff}
    .left{left:6%} .right{right:6%}

    /* HP bars + names */
    .hud{position:absolute; top:12px; left:0; right:0; display:flex; justify-content:space-between; padding:0 12px; gap:12px}
    .hpbox{flex:1; display:flex; flex-direction:column; gap:6px}
    .name{font-weight:800; text-shadow:0 1px 0 #fff}
    .bar{height:16px; background:var(--rail); border:2px solid #0002; border-radius:999px; overflow:hidden}
    .hp{height:100%; width:100%}
    .hpL{background:linear-gradient(90deg,var(--barL),#c0f2c9)}
    .hpR{background:linear-gradient(90deg,var(--barR),#fecaca)}

    .vs{position:absolute; top:8px; left:50%; transform:translateX(-50%); background:#fff; border:3px solid #0002; padding:4px 10px; border-radius:999px; font-weight:900}

    .log{margin:10px; padding:10px; border:3px solid #0002; border-radius:14px; background:#fff; min-height:48px}

    /* Cage */
    .cage{position:absolute; inset:0; display:grid; place-items:center; background:#0000002b; z-index:10}
    .bars{position:relative; width:72%; height:72%; border-radius:18px;
      background:repeating-linear-gradient(90deg,#364152 0 12px, transparent 12px 32px);
      border:3px solid #475569; box-shadow:inset 0 0 0 3px #0b1220}
    .door{position:absolute; inset:0; border-radius:18px; background:linear-gradient(180deg,#1f2937,#111827); border-left:4px solid #94a3b8; transform-origin:left;}
    .cage.open .door{animation:door 1200ms ease forwards}
    @keyframes door{to{transform:perspective(700px) rotateY(70deg) translateX(-6%); opacity:.15}}

    /* Run/charge animations */
    @keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
    @keyframes runL{0%{transform:translateX(0)} 50%{transform:translateX(160px)} 100%{transform:translateX(0)}}
    @keyframes runR{0%{transform:translateX(0)} 50%{transform:translateX(-160px)} 100%{transform:translateX(0)}}
    @keyframes collide{0%{transform:scale(1)} 40%{transform:scale(1.07) rotate(1.2deg)} 100%{transform:scale(1)}}
    .idle{animation:bob 1.1s ease-in-out infinite}

    /* Countdown + dust + spark layers */
    .count{position:absolute; inset:0; display:grid; place-items:center; font-size:110px; font-weight:900; color:#0008; text-shadow:0 4px 0 #fff; z-index:8}
    canvas.layer{position:absolute; inset:0; pointer-events:none; z-index:6}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üèÉ‚Äç‚ôÇÔ∏è Animal Run</h1>
      <div style="display:flex; gap:8px; align-items:center">
        <button class="btn" id="saveDefaults">Save as my defaults</button>
        <button class="btn" id="goHome" style="display:none">Back to Gallery</button>
      </div>
    </header>

    <div class="panel controls">
      <input id="nameInput" type="text" placeholder="Animal name (optional)" />
      <input id="urlInput" type="url" placeholder="Paste image URL (HTTPS) or leave blank to use files" />
      <button class="btn" id="addUrl">Add by URL</button>
      <input id="fileInput" type="file" accept="image/*" multiple />
      <span style="font-size:12px;opacity:.8">Tip: upload your photos, then click ‚ÄúSave as my defaults‚Äù to preload them next time.</span>
      <span class="toggle" style="margin-left:auto">
        <label><input type="checkbox" id="soundToggle" checked /> üîä Sound</label>
      </span>
    </div>

    <section class="panel" id="galleryPanel">
      <div class="gallery" id="gallery"></div>
    </section>

    <section class="arena" id="arena">
      <div class="stage" id="stage">
        <div class="hud">
          <div class="hpbox">
            <div class="name" id="nameL">Player</div>
            <div class="bar"><div class="hp hpL" id="hpLeft"></div></div>
          </div>
          <div class="hpbox" style="text-align:right">
            <div class="name" id="nameR">Opponent</div>
            <div class="bar"><div class="hp hpR" id="hpRight"></div></div>
          </div>
        </div>
        <div class="vs">VS</div>
        <div class="fighter left idle" id="boxL"><img id="imgL" alt="left animal"/></div>
        <div class="fighter right idle" id="boxR"><img id="imgR" alt="right animal"/></div>
        <canvas class="layer" id="dust"></canvas>
        <canvas class="layer" id="sparks"></canvas>
        <!-- ground element kept for structure but hidden via CSS -->
        <div class="ground"></div>
        <div class="cage" id="cage" style="display:none">
          <div class="bars"><div class="door"></div></div>
        </div>
        <div class="count" id="countdown" style="display:none">3</div>
      </div>
      <div class="log" id="log">Pick an animal to start‚Ä¶</div>
      <div style="display:flex; gap:8px; padding:8px 10px">
        <button class="btn" id="playAgain" style="display:none">Play again</button>
      </div>
    </section>
  </div>

  <script>
    // ---- PRELOAD YOUR REPO IMAGES HERE -------------------------------------
    const PRELOADED = [
      { name: 'Tiger',    src: 'assets/animals/Tiger.jpeg' },
      { name: 'Elephant', src: 'assets/animals/Elephant.jpeg' },
      { name: 'Fox',      src: 'assets/animals/Fox.jpeg' },
      { name: 'Terex',      src: 'assets/animals/Terex.jpeg' }
    ];
    // ------------------------------------------------------------------------

    // Elements
    const gallery = document.getElementById('gallery');
    const arena = document.getElementById('arena');
    const stage = document.getElementById('stage');
    const imgL = document.getElementById('imgL');
    const imgR = document.getElementById('imgR');
    const boxL = document.getElementById('boxL');
    const boxR = document.getElementById('boxR');
    const nameL = document.getElementById('nameL');
    const nameR = document.getElementById('nameR');
    const hpLeft = document.getElementById('hpLeft');
    const hpRight = document.getElementById('hpRight');
    const countdownEl = document.getElementById('countdown');
    const log = document.getElementById('log');
    const cage = document.getElementById('cage');
    const dust = document.getElementById('dust');
    const sparks = document.getElementById('sparks');
    const soundToggle = document.getElementById('soundToggle');
    const dctx = dust.getContext('2d');
    const sctx = sparks.getContext('2d');

    // --- Simple WebAudio sound engine ---------------------------------------
    class Sound {
      constructor() {
        this.ctx = null;
        this.enabled = true;
        document.addEventListener('click', () => this._ensure(), { once: true });
      }
      _ensure() {
        if (!this.ctx) {
          try { this.ctx = new (window.AudioContext || window.webkitAudioContext)(); }
          catch(_) { this.enabled = false; }
        }
      }
      setEnabled(on){ this.enabled = !!on; }
      now(){ return this.ctx ? this.ctx.currentTime : 0; }
      _note({type='sine', freq=440, dur=0.15, gain=0.2, attack=0.005, decay=0.1, detune=0}){
        if(!this.enabled) return;
        this._ensure(); if(!this.ctx) return;
        const t0 = this.now();
        const o = this.ctx.createOscillator();
        const g = this.ctx.createGain();
        o.type = type; o.frequency.value = freq; o.detune.value = detune;
        g.gain.setValueAtTime(0, t0);
        g.gain.linearRampToValueAtTime(gain, t0 + attack);
        g.gain.exponentialRampToValueAtTime(0.0001, t0 + attack + decay + dur);
        o.connect(g).connect(this.ctx.destination);
        o.start(t0); o.stop(t0 + attack + decay + dur + 0.05);
      }
      _noise({dur=0.25, gain=0.25, type='white', lp=4000}){
        if(!this.enabled) return;
        this._ensure(); if(!this.ctx) return;
        const t0 = this.now();
        const bufferSize = Math.floor(this.ctx.sampleRate * dur);
        const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
        const data = buffer.getChannelData(0);
        for (let i=0;i<bufferSize;i++){
          const w = Math.random()*2-1;
          data[i] = type==='white'? w : data[i-1]*0.98 + w*0.02;
        }
        const src = this.ctx.createBufferSource();
        src.buffer = buffer;

        const filt = this.ctx.createBiquadFilter(); filt.type='lowpass'; filt.frequency.value=lp;
        const g = this.ctx.createGain(); g.gain.value = gain;

        src.connect(filt).connect(g).connect(this.ctx.destination);
        src.start(t0); src.stop(t0+dur);
      }
      // Public cues
      tick(){ this._note({type:'square', freq:880, dur:0.05, gain:0.12}); }
      go(){ this._note({type:'triangle', freq:523.25, dur:0.25, gain:0.25}); }
      door(){ this._note({type:'sawtooth', freq:140, dur:0.4, gain:0.2}); }
      run(){ this._noise({dur:0.20, gain:0.18, type:'brown', lp:1200}); }
      hit(){ this._noise({dur:0.18, gain:0.22, type:'white', lp:2200}); this._note({type:'triangle', freq:220, dur:0.12, gain:0.18}); }
      win(){ this._note({type:'sine', freq:659.25, dur:0.18, gain:0.22}); setTimeout(()=>this._note({type:'sine', freq:783.99, dur:0.22, gain:0.22}),120); setTimeout(()=>this._note({type:'sine', freq:987.77, dur:0.30, gain:0.22}),260); }
    }
    const S = new Sound();
    soundToggle.addEventListener('change', e=> S.setEnabled(e.target.checked));

    // State
    let animals = [];
    const LSK = 'animalrun.defaults.v2';

    // Helpers
    const el = (t,a={},...c)=>{const n=document.createElement(t);Object.entries(a).forEach(([k,v])=>{if(k==='style'&&typeof v==='object')Object.assign(n.style,v);else if(k.startsWith('on'))n.addEventListener(k.slice(2),v);else n.setAttribute(k,v)});c.flat().forEach(x=>n.appendChild(typeof x==='string'?document.createTextNode(x):x));return n};
    function addAnimal(src,name){ animals.push({name:name?.trim()||infer(src),src}); renderGallery(); }
    function infer(src){ try{ const u=new URL(src, location.href); const f=u.pathname.split('/').pop(); return (f?.split('.')?.[0]||'Animal').replace(/[-_]/g,' ');} catch{ return 'Animal'; } }
    function renderGallery(){ gallery.innerHTML=''; animals.forEach((a,i)=>{
      gallery.appendChild(el('button',{class:'card',onclick:()=>selectAnimal(i)},
        el('div',{class:'thumb'}, el('img',{src:a.src,alt:a.name})), el('div',{class:'label'}, a.name))); }); }

    // Add by URL / file
    document.getElementById('addUrl').addEventListener('click',()=>{
      const url=document.getElementById('urlInput').value.trim();
      const name=document.getElementById('nameInput').value.trim();
      if(!url) return alert('Paste an image URL first.');
      addAnimal(url,name||undefined);
      document.getElementById('urlInput').value=''; document.getElementById('nameInput').value='';
    });
    const fileInput=document.getElementById('fileInput');
    fileInput.addEventListener('change',e=>{
      const files=[...e.target.files];
      files.forEach(f=>{ if(!f.type.startsWith('image/'))return; const r=new FileReader();
        r.onload=()=> addAnimal(r.result, f.name.replace(/\\.[^.]+$/, '')); r.readAsDataURL(f); });
      fileInput.value='';
    });

    // Save defaults (localStorage)
    document.getElementById('saveDefaults').addEventListener('click',()=>{
      try{ localStorage.setItem(LSK, JSON.stringify(animals)); alert('Saved! These animals will preload next time.'); }
      catch(e){ alert('Could not save defaults in this browser.'); }
    });

    // Select + flow with cage + run + fight
    function selectAnimal(index){
      if(animals.length<2){ alert('Add at least two animals.'); return; }
      const p=animals[index]; let j=index; while(j===index) j=Math.floor(Math.random()*animals.length); const o=animals[j];

      document.getElementById('galleryPanel').style.display='none';
      arena.classList.add('show'); document.getElementById('goHome').style.display='inline-block';

      imgL.src=p.src; imgR.src=o.src; nameL.textContent=p.name; nameR.textContent=o.name;
      hpLeft.style.width='100%'; hpRight.style.width='100%';
      log.textContent = `${p.name} is trapped in a cage‚Ä¶`;

      // SFX: door
      S.door();
      cage.style.display='grid'; // show cage
      setTimeout(()=> cage.classList.add('open'), 700); // open door
      setTimeout(()=>{ // remove cage and run out
        cage.classList.remove('open'); cage.style.display='none';
        runWithDust(boxL,'L', ()=> countdown(()=> startFight(p,o)));
      }, 2100);
    }

    function countdown(done){
      countdownEl.style.display='grid'; let n=3; countdownEl.textContent=n;
      const t=setInterval(()=>{
        n--;
        if(n>0){ countdownEl.textContent=n; S.tick(); }
        else {
          countdownEl.textContent='Go!'; S.go();
          setTimeout(()=>{ countdownEl.style.display='none'; clearInterval(t); done(); },550);
        }
      },650);
    }

    function startFight(p,o){
      boxL.classList.add('idle'); boxR.classList.add('idle');
      let L=100, R=100; let turn=0;
      const tick=setInterval(()=>{
        const dmg = 8+Math.floor(Math.random()*13);
        if(turn===0){
          charge(boxL,'L'); impactSparks(); S.hit();
          R=Math.max(0,R-dmg); hpRight.style.width=R+'%'; log.textContent=`${p.name} hits ${o.name} for ${dmg}!`;
        }else{
          charge(boxR,'R'); impactSparks(); S.hit();
          L=Math.max(0,L-dmg); hpLeft.style.width=L+'%'; log.textContent=`${o.name} hits ${p.name} for ${dmg}!`;
        }
        if(L===0||R===0){ clearInterval(tick); const winner = R===0&&L>0? p : (L===0&&R>0? o : (Math.random()<.5?p:o));
          log.textContent = `üèÜ ${winner.name} wins!`; S.win(); document.getElementById('playAgain').style.display='inline-block'; }
        else{ turn = 1 - turn; }
      }, 1100);
    }

    // Animations + particles
    function runWithDust(node,dir,done){
      resizeLayers();
      const parts=[...Array(40)].map(()=>({x:dir==='L'? node.offsetLeft+node.offsetWidth: node.offsetLeft, y:node.offsetTop+node.offsetHeight-10, vx:(Math.random()-0.5)*2, vy:-Math.random()*2-1, s:2+Math.random()*3, a:1 }));
      let t=0;
      const dustTick=()=>{
        dctx.clearRect(0,0,dust.width,dust.height);
        parts.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.vy+=0.05; p.a-=0.02; dctx.fillStyle=`rgba(160,140,110,${Math.max(p.a,0)})`; dctx.beginPath(); dctx.arc(p.x,p.y,p.s,0,Math.PI*2); dctx.fill(); });
        if(t++<50) requestAnimationFrame(dustTick);
      };
      dustTick();
      // SFX: footstep/dust
      S.run();
      node.style.animation = (dir==='L'? 'runL':'runR') + ' 700ms ease';
      setTimeout(()=>{ node.style.animation='bob 1.1s ease-in-out infinite'; done&&done(); },720);
    }

    function charge(node,dir){
      node.classList.remove('idle');
      node.style.animation = (dir==='L'? 'runL':'runR') + ' 600ms ease';
      boxL.style.animation='collide 420ms'; boxR.style.animation='collide 420ms';
      setTimeout(()=>{ boxL.style.animation='bob 1.1s ease-in-out infinite'; boxR.style.animation='bob 1.1s ease-in-out infinite'; },420);
    }

    function impactSparks(){
      resizeLayers();
      const cx = stage.clientWidth/2, cy = stage.clientHeight*0.55;
      const parts=[...Array(24)].map(()=>({x:cx, y:cy, vx:(Math.random()-0.5)*6, vy:(Math.random()-0.5)*4, a:1, s:2+Math.random()*2, c:["#f87171","#fde047","#34d399","#60a5fa","#a78bfa"][Math.floor(Math.random()*5)] }));
      let t=0;
      const step=()=>{
        sctx.clearRect(0,0,sparks.width,sparks.height);
        parts.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.vx*=0.96; p.vy*=0.96; p.a-=0.02; sctx.fillStyle=`${p.c}AA`; sctx.beginPath(); sctx.arc(p.x,p.y,p.s,0,Math.PI*2); sctx.fill(); });
        if(t++<40) requestAnimationFrame(step); else sctx.clearRect(0,0,sparks.width,sparks.height);
      };
      step();
    }

    function resizeLayers(){ [dust,sparks].forEach(c=>{ c.width = stage.clientWidth; c.height = stage.clientHeight; }); }

    // Buttons
    document.getElementById('playAgain').addEventListener('click',()=>{
      log.textContent='Pick an animal to start‚Ä¶';
      document.getElementById('playAgain').style.display='none';
      document.getElementById('galleryPanel').style.display='block';
      arena.classList.remove('show');
      document.getElementById('goHome').style.display='none';
    });
    document.getElementById('goHome').addEventListener('click',()=> document.getElementById('playAgain').click());

    // Load defaults (localStorage or PRELOADED)
    function loadDefaults(){
      try{
        const saved = localStorage.getItem(LSK);
        animals = saved ? JSON.parse(saved) : PRELOADED.slice();
      }catch{ animals = PRELOADED.slice(); }
      renderGallery();
    }

    // Init
    loadDefaults();
    window.addEventListener('resize', resizeLayers);
  </script>
</body>
</html>
"""
with open("/mnt/data/AnimalRun_index.html","w") as f:
    f.write(html)
"/mnt/data/AnimalRun_index.html"
